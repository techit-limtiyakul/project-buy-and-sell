{% extends "base.html" %}
{% block content %}
<br>
<br>
<div class="container">
	<div class="row">
		<div class="col-sm">
			<div id="BasicImageCarousel" class="carousel slide" data-ride="carousel">
				<div class="carousel-inner">
					{% for pic in Pictures %}
						{% if pic.Number == 1%}
							<div class="carousel-item active">
								<img id="myImg" class="d-block w-100" src="{{ pic.Image }}"">
							</div>
						{% else %}
							<div class="carousel-item">
								<img id="myImg" class="d-block w-100" src="{{ pic.Image }}">
							</div>
						{% endif %}
					{% endfor %}
				</div>
				<a class="carousel-control-prev" href="#BasicImageCarousel" role="button" data-slide="prev">
					<span class="carousel-control-prev-icon" aria-hidden="true"></span>
					<span class="sr-only">Previous</span>
				</a>
				<a class="carousel-control-next" href="#BasicImageCarousel" role="button" data-slide="next">
					<span class="carousel-control-next-icon" aria-hidden="true"></span>
					<span class="sr-only">Next</span>
				</a>
			</div>
		</div>
		<div class="col-8">
			<h1>{{ Title }}</h1>
			{% if user.is_authenticated %}
				<button id="like" data-listid="{{ id }}" class="btn btn-primary" type="button">
				<span class="glyphicon glyphicon-thumbs-up"></span>
				{% if Favd %}
					Like
				{% else %}
					Dislike
				{% endif %}
				</button>
			{% endif %}
			<p><b>{{ Seller }}:</b> RATINGS TODO</p>
			<p><b>Price:</b> ${{ Price }}</p>
			{% if CanDeliver %}
				<p><b>Can Deliver: Yes</b></p>
			{% else %}
				<p><b>Can Deliver: No</b></p>
			{% endif %}
			<p><b>Condition: {{ Condition }}</b></p>
			<p><b>Description:</b> {{ Description }}</p>
			<p><b>Contact Information:</b> {{ ContactInformation }}</p>
		</div>
		<div class="col-4">
		</div>
	</div>
</div>

<!-- The Modal -->
<div id="imageModal" class="modal">
  <!-- The Close Button -->
  <span class="close">&times;</span>

  <!-- Modal Content (The Image) -->
  <img class="modal-content" id="expandedImage">
</div>

<script>
// Get the modal
var modal = document.getElementById('imageModal');

// Get the image and insert it inside the modal - use its "alt" text as a caption
var imgs = document.getElementsByClassName("d-block w-100");
var modalImg = document.getElementById("expandedImage");
for (i = 0; i < imgs.length; i++) { 
    imgs[i].onclick = function(){
    modal.style.display = "block";
    modalImg.src = this.src;
	}
}

// Get the <span> element that closes the modal
var span = document.getElementsByClassName("close")[0];

// When the user clicks on <span> (x), close the modal
span.onclick = function() { 
  modal.style.display = "none";
}

// Like
$('#like').click(function(){
    var listid;
    listid = $(this).attr("data-listid");
    $.get('/market/like/', {listing_id: listid}, function(data){
               location.reload();
    });
});
</script>

{% endblock %}